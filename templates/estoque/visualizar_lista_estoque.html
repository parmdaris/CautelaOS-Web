{% extends "base.html" %}

{% block title %}Estoque - Cautela OS{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='estoque/css/visualizar_lista_estoque.css') }}">
{% endblock %}

{% block content %}

<h2>ğŸ“¦ Estoque</h2>
<p class="subtitle">
    Artigos: {{ qtd_artigos }} Â· Valor total: <strong>R$ {{ valor_estoque }}</strong>
</p>

<div class="actions-bar">
    <a href="{{ url_for('dashboard') }}" class="btn secondary">â† Voltar</a>
    <a href="{{ url_for('adicionarItem') }}" class="btn primary">+ Novo item</a>

    <form method="GET" action="{{ url_for('imprimir_estoque') }}" target="_blank">
        <button type="submit" class="btn warning">ğŸ–¨ Imprimir</button>
    </form>
</div>

<div class="table-card">
    <table id="tabela-estoque" class="display">
        <thead>
            <tr>
                <th>CÃ³digo</th>
                <th>DescriÃ§Ã£o</th>
                <th style="display:none">Tipo</th>
                <th>Qtd</th>
                <th>Valor</th>
                <th>Atacado</th>
                <th>ğŸ”ï¸</th>
            </tr>
        </thead>
        <tbody>
            {% for item in dados_estq %}
            <tr>
                <td>{{ item.codigo }}</td>
                <td style="text-align:left">{{ item.descricao }}</td>
                <td style="display:none">{{ item.tipo }}</td>
                <td>{{ item.qtd }}</td>
                <td>R$ {{ item.valor }}</td>
                <td>R$ {{ item.valor_atacado }}</td>
                <td>
                    <a href="{{ url_for('ver_item_estoque', codigo_item=item.codigo) }}">ğŸ”ï¸</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}

{% block extra_js %}
<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="{{ url_for('static', filename='estoque/js/visualizar_lista_estoque.js') }}"></script>
{% endblock %}
